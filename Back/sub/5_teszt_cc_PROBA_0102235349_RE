#include <cstdio>
#include <cstring>
#include <cmath>
#include <cstdlib>
#include <cctype>

#define TOL ( 0.000001 )

#define S_LETTER( a ) ( ( ( a ) >= 'a' ) && ( ( a ) <= 'z' ) )
#define ABS( a ) ( ( ( a ) < 0 ) ? (-( a )) : ( a ) )
#define DBG( x ) 

int is_float(char*);


int main(int nx,char**x)
{
  int
    ex_code , 
    isol , iact;
  FILE
    *fact,*fsol;
  char
    wact [ 1024 ] , wsol [ 1024 ] ; 

  double
    tact , tsol ;
  
  char *psol,*pact;
  if(nx>2){
      psol=x[1];
      pact=x[2];
  }else{
      psol=(char*)"sol.out";
      pact=(char*)"act.out";
  }
  
  fsol = fopen( psol , "r" ) ;
  fact = fopen( pact , "r" ) ;
  ex_code = 0 ;
  while( 1 == fscanf( fsol , "%s" , wsol ) )
  {
    if( 1 != fscanf( fact , "%s" , wact ) ) 
    {
DBG(printf("1:nincs eleg output\n"));    
      ex_code = 1 ;
      break ;
    } 

    if( S_LETTER( wsol[ 0 ] ) )
    {
      if( strcmp( wsol , wact ) )
      {
DBG(printf("2: nem egyezo sztringek\n"));
        ex_code = 1 ;
        break ;
      }
    }
    else
    {
      sscanf( wsol , "%lf" , & tsol ) ;
      if( ! is_float( wact ) )
      {
DBG(printf("3: nem float\n"));
        ex_code = 1 ;
        break ;
      }
      sscanf( wact , "%lf" , & tact ) ;
      if( ABS( tact - tsol ) > TOL )
      {
DBG(printf("4\n"));
DBG(printf("rossz float, act:%lf  sol:%lf\n",tact,tsol));
        ex_code = 1 ;
        break ;
      }
    }
  }

  if( ex_code == 0 && 1 == fscanf( fact , "%s" , wact ) )
  {
DBG(printf("5: tul sok output\n"));
    ex_code = 1 ;
  }
  
  fclose( fact ) ;
  fclose( fsol ) ;

  return ex_code ;
}

// ez rossz volt: egesz szamra hamisat adott vissza
int is_float(char* x)
{
   int i ;
   i=0;
   if(('+'==x[0])||('-'==x[0])){i=1;}
   while(isdigit(x[i])){i++;}
   if('\0'==x[i]){return 1;}
   if('.'!=x[i]){return 0;}
   i++;
   while(isdigit(x[i])){i++;}
   if('\0'==x[i]){return 1;}
   return 0 ;  
}
